language: python
sudo: required
dist: xenial
cache: pip

jobs:
  include:
    - stage: test
      name: "Chart Lint"

      script:
        - sh chart-lint.sh

    - stage: test
      name: "Documentation Tests"
      language: node_js
      node_js: 10

      install:
        - npm install

      script:
        - npm run lint:md
    - stage: deploy
      if: branch = master AND type IN (pull_request)
      script:
      - sh chart-package.sh
      - sh git-push.sh
